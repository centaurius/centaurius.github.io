
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Centaurius Blog</title>
  <meta name="author" content="Hamilton Andrew White">

  
  <meta name="description" content=" SVG pie chart ">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://centaurius.github.io/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Centaurius Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Centaurius Blog</a></h1>
  
    <h2>centaurius@centaurius ~$ cd /tech</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="dev.centaurius@gmail.com" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="centaurius.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/about.html">About</a></li>
  <!-- 
    <li><a href="/blog/archives">Archives</a></li> 
  -->
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/:blog/2017/02/14/brython-example.html">Brython Example</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-14T19:34:19+00:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>7:34 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><html>
<head>
<meta charset="iso-8859-1"></p>

<script type="text/javascript" src="../src/brython.js"></script>




<script type="text/python">
import math

from browser import document as doc
import browser.html as html
import browser.svg as svg

ray = 100
values = [20,10,30,15,25]

colors = ["C8E0A2","A6BED1","E4CC85","D7D7D7","90AF97","698EA8",
        "BFA166","A8ADB0","FF6600"]

panel = doc["panel"]
legend = None
print(svg.text)
title = svg.text('',x=150,y=25,
    font_size=22,text_anchor="middle",
    style={"stroke":"black"})
panel <= title

paths = {}

def pie_chart():
    global paths,legend
    # clear SVG doc
    for child in panel: # iteration on child nodes
        if child != title:
            panel.removeChild(child)

    # zone for legend
    legend = svg.text('',x=350,y=150,
        font_size=20,text_anchor="middle",
        style={"stroke":"black"})
    panel <= legend

    set_title()
        
    paths = {}
    data = {}
    for i,cell in enumerate(cells):
        data['Item %s' %(i+1)]=float(cell.text)
    style={"fill-opacity": 1,"stroke":"black","stroke-width": 1}
    width = 3.8*ray
    height = 2.2*ray
    x_center = 150
    y_center = 160
    x = x_center
    y = y_center-ray
    total = sum(data.values())
    items = list(data.items())
    cumul = 0
    for i,(key,value) in enumerate(items):
        angle1 = 2*math.pi*cumul
        cumul += float(value)/total
        angle = 2*math.pi*cumul
        x_end = x_center + ray*math.cos((math.pi/2)-angle)
        y_end = y_center - ray*math.sin((math.pi/2)-angle)
        path = "M%s,%s " %(x_center,y_center)
        path += "L%s,%s " %(int(x),int(y))
        if angle-angle1 <= math.pi:
            path += "A%s,%s 0 0,1 " %(ray,ray)
        else:
            path += "A%s,%s 0 1,1 " %(ray,ray)
        path += "%s,%s z" %(int(x_end),int(y_end))
        x,y = x_end,y_end
        color = colors[i % len(colors)]
        style["fill"]='#'+color
        path = svg.path(d=path,style=style)
        path.bind('mouseover',lambda ev,key=key:show_legend(key))
        path.bind('mouseout',lambda ev:hide_legend)
        panel <= path
        paths[key]=path

def set_title(*args):
    title.text = title_input.value
    
def show_legend(key):
    legend.text = key

def hide_legend(ev):
    legend.text = ''

def change(rank,offset):
    x = int(cells[int(rank)].text)
    if x+int(offset)>=0:
        cells[int(rank)].text = x+int(offset)
        pie_chart()

nb_cols = 2
nb_lines = 5

t = html.TABLE()
tb = html.TBODY()
cells = []

title_input = html.INPUT(value='Pie Chart')
title_input.bind('change',set_title)
tb <= html.TD('Title')+html.TD(title_input,colspan=3)

for i in range(nb_lines):
    row = html.TR()
    row <= html.TD('Item %s' %(i+1))
    b_down = html.BUTTON('<')
    b_down.bind('click',lambda ev,x=i:change(x,-1))
    row <= html.TD(b_down)
    cell = html.SPAN(values[i])
    row <= html.TD(cell)
    b_up = html.BUTTON('>')
    b_up.bind('click',lambda ev,x=i:change(x,1))
    row <= html.TD(b_up)
    cells.append(cell)
    tb <= row
t <= tb
doc['data'] <= t

pie_chart()
</script>


<p></head>
<body onLoad="brython(2)"></p>

<h1>SVG pie chart</h1>


<p><p></p>

<p><table>
<tr>
<td id="data"></td>
<td>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    width="400" height="300" style="border-style:solid;border-width:1;border-color:#000;">
  <g id="panel">
  </g>
</svg>
</td>
</tr>
</table></p>

<p></body>
</html></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/:blog/2017/02/13/centaurius-blog-welcome.html">Centaurius Blog Welcome!</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-13T21:59:19+00:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>9:59 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 class="section-heading">Welcome</h2>


<p>As an engineering student who's always on the go, life can be busy!  However, I would like to share my love of music, program development, and advances in engineering with the world, and you can find all sorts of content on here. </p>




</div>
  
  
    <footer>
      <a rel="full-article" href="/:blog/2017/02/13/centaurius-blog-welcome.html">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/:blog/2017/02/14/brython-example.html">Brython Example</a>
      </li>
    
      <li class="post">
        <a href="/:blog/2017/02/13/centaurius-blog-welcome.html">Centaurius Blog Welcome!</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/centaurius">@centaurius</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'centaurius',
            count: 8,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Hamilton Andrew White -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'devcentaurius';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
